<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>
	<title>home</title>
	<style>
	@media (prefers-color-scheme: dark) {
		body {
			background: #1f1f1f;
			color: #ddd;
		}
		input, button, select {
			display: block;
		}
	}
	</style>
</head>
<body>
	<h1>edelheim</h1>
	<main id='home'></main>
	<script type='module'>
		import { UI } from './ui.js';
		import { elemRegister } from './elems.js';

	  	elemRegister( '_', null, 'button', 'div', 'input', 'h2', 'h3', 'label', 'main', 'p', 'section' );

                function sendMessage( path, data ) {
			console.log( `sent a message: ${path}: ${data}` );
                }

		const ui = new UI( 'home', sendMessage );
		window.setInterval( () => {
			ui.render();
		} , 1000 );

		// TEST DATA.

		ui.set( 'home/living-room/speakers/power',          'on' );
		ui.set( 'home/living-room/speakers/volume_percent', '80' );

		ui.render();

		document.querySelector( 'body' ).appendChild(
			_button(
				'add lights',
				{ click: e => ui.set( 'home/living-room/lights/power', 'on' ) },
			)
		);
		document.querySelector( 'body' ).appendChild(
			_button(
				'off lights',
				{ click: e => ui.set( 'home/living-room/lights/power', 'off' ) },
			)
		);
	</script>
</body>
</html>
